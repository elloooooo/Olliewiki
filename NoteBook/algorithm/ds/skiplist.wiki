%title skipList

= 跳跃表 =

== 跳表插入操作的选层问题： ==
可以生动地表述为：从第一层开始，逐次向上一层，对每层进行掷硬币操作，如果0则不插入，如果为1则插入。

对于第一层，元素有$\frac{1}{2}$概率插入，如果掷硬币结果为0，则对第二层进行掷硬币操作，
元素有$\frac{1}{2}$（不插入第一层的概率）* $\frac{1}{2}$（插入第二层的概率）概率插入。以此类推。
如果跳表已经有n层，而前n次掷硬币的操作结果都为0，概率为$(\frac{1}{2})^n$，那么就插入n+1层。

大致上说元素插入第n层的概率为$(\frac{1}{2})^n$，
所以从期望上讲，落在上一层的元素的个数应该趋近于下层元素的一半，
但由于上层元素将同时插入到下层，那么跳表每一层的元素的个数都是其下面一层的$\frac{1}{3}$。

由于更上层元素在这两层元素中的插入，上层元素比下层元素的比值为$(\frac{1}{3},\frac{1}{2})$，随着元素的增多，无线趋近于$\frac{1}{2}$

元素出现在第$k$行的概率与出现在第$k-1$行的概率比值，当元素个数n趋于无穷大时，上一行的出现一个元素的概率为下一行出现概率的一半。

证明如下：

$\lim_{n \to \infty}\frac{(\frac{1}{2})^k+(\frac{1}{2})^{k+1}+(\frac{1}{2})^{k+2}+ \dots + (\frac{1}{2})^{k+n}}{(\frac{1}{2})^{k-1}+(\frac{1}{2})^k+(\frac{1}{2})^{k+1}+(\frac{1}{2})^{k+2}+ \dots + (\frac{1}{2})^{k+n}}$

$=\lim_{n \to \infty}\frac{\frac{1}{2}[1-(\frac{1}{2})^{n+1}]}{[1-(\frac{1}{2})^{n+2}]}$

$=\frac{1}{2}$

